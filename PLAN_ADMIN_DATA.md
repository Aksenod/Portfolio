# План: Отображение кейсов в админке

## Анализ проблемы (Product Discovery)

### Текущий User Journey
```
Пользователь → Открывает админку → Логинится → Видит пустой список → Фрустрация
```

### Ожидаемый User Journey
```
Пользователь → Открывает админку → Логинится → Видит все существующие кейсы → Может редактировать
```

---

## Найденные проблемы

### 1. Архитектурная проблема с картинками
**Симптом:** Превью не отображаются
**Причина:** Пути к картинкам относительные (`/Portfolio/assets/...`) — это локальные файлы на GitHub Pages, а не абсолютные URL

**Пример из данных:**
```json
"cover_image": "/Portfolio/assets/62798ca94d23ebecbad7d197/6384ea47..."
```

**Нужно:** Абсолютный URL
```json
"cover_image": "https://aksenod.github.io/Portfolio/assets/62798ca94d23ebecbad7d197/6384ea47..."
```

### 2. Проблема хранения данных на Render
**Симптом:** Данные пропадают после перезапуска
**Причина:** SQLite хранится в файловой системе, которая обнуляется при каждом деплое на Render Free Tier

**Решения:**
- [ ] Переключиться на PostgreSQL (Render предоставляет бесплатно)
- [ ] Или использовать внешнюю БД (Supabase, PlanetScale)

### 3. Проблема первого запуска
**Симптом:** JSON импортируется только если БД пустая
**Причина:** Логика в `_import_cases_from_json()` проверяет наличие любых данных

---

## План реализации

### Фаза 1: Быстрый фикс картинок (30 мин)
1. [ ] Обновить `cases_data.json` — добавить базовый URL к путям картинок
2. [ ] Добавить функцию нормализации URL в админке
3. [ ] Протестировать отображение превью

### Фаза 2: Надёжное хранение данных
1. [ ] Добавить переменную `ASSETS_BASE_URL` в конфиг
2. [ ] Обновить бэкенд — при отдаче данных добавлять базовый URL к картинкам
3. [ ] Рассмотреть миграцию на PostgreSQL для продакшена

### Фаза 3: Улучшение UX админки
1. [ ] Добавить индикатор загрузки при получении данных
2. [ ] Показывать понятную ошибку если API недоступен
3. [ ] Кешировать данные локально (localStorage) для офлайн-просмотра

---

## Приоритет реализации

| # | Задача | Влияние | Сложность |
|---|--------|---------|-----------|
| 1 | Фикс URL картинок | Высокое | Низкая |
| 2 | Индикатор загрузки | Среднее | Низкая |
| 3 | Обработка ошибок | Среднее | Низкая |
| 4 | PostgreSQL миграция | Высокое | Средняя |

---

## Немедленное действие

Сейчас реализуем **Фазу 1** — фикс отображения картинок:
- Добавим базовый URL к относительным путям
- Картинки станут видны в превью карточек
